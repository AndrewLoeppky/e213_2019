<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Creating user-defined types &#8212; E213</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}, "extensions": ["color.js"]}, "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Home</a>
        <span class="navbar-text navbar-version pull-left"><b>2019Jan01</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../week_notes.html">1. Weekly notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-1-jan-3">1.1. Week 1  Jan 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-2-jan-8-jan-10">1.2. Week 2  Jan 8/Jan 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-3-jan-15-jan-17">1.3. Week 3  Jan 15/Jan 17</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-4-jan-22-jan-24">1.4. Week 4  Jan 22/Jan 24</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-5-jan-29-jan-31">1.5. Week 5  Jan 29/Jan 31</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-6-feb-05-feb-07">1.6. Week 6  Feb 05/Feb 07</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-7-feb-19-feb-21">1.7. Week 7  Feb 19/Feb 21</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-8-feb-26-feb-28">1.8. Week 8  Feb 26/Feb 28</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-9-mar-05-mar-07">1.9. Week 9  Mar 05/Mar 07</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#week-10-mar-12-mar-14">1.10. Week 10  Mar 12/Mar 14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../week_notes.html#general-notes">1.11. General notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../solutions.html">2. Assignment solutions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../solutions.html#week-2">2.1. Week 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../texts.html">3. Texts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../texts.html#math">3.1. Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="../texts.html#python">3.2. Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">4. Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#python-introductory-texts">4.1. Python Introductory Texts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#moving-from-matlab-to-python">4.2. Moving from matlab to python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#cocalc">4.3. Cocalc</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheet.html">5. Cheat sheet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cheat_sheet.html#useful-shell-commands">5.1. Useful shell commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cheat_sheet.html#useful-git-commands">5.2. Useful git commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cheat_sheet.html#useful-debugger-commands">5.3. Useful debugger commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notebook_index.html">6. Notebook index</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../week_notes.html">1. Weekly notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solutions.html">2. Assignment solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../texts.html">3. Texts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">4. Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheet.html">5. Cheat sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook_index.html">6. Notebook index</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/web_notebooks/class_intro_solution.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../week_notes.html">1. Weekly notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solutions.html">2. Assignment solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../texts.html">3. Texts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">4. Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheet.html">5. Cheat sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook_index.html">6. Notebook index</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<h1><p>Table of Contents</p>
</h1><div class="toc"><ul class="toc-item"><li><p>1&nbsp;&nbsp;Learning objectives</p>
</li><li><p>2&nbsp;&nbsp;Types and classes</p>
</li><li><p>3&nbsp;&nbsp;Class variables</p>
</li><li><p>4&nbsp;&nbsp;Instance variables</p>
</li><li><p>5&nbsp;&nbsp;Instance methods</p>
<ul class="toc-item"><li><p>5.1&nbsp;&nbsp;Passing self to instance methods</p>
</li></ul></li><li><p>6&nbsp;&nbsp;Your turn</p>
</li><li><p>7&nbsp;&nbsp;Solution – if you don’t know about class methods</p>
<ul class="toc-item"><li><p>7.1&nbsp;&nbsp;this works, but suffers from code smell</p>
</li></ul></li><li><p>8&nbsp;&nbsp;Solution – using class methods</p>
</li><li><p>9&nbsp;&nbsp;Summary</p>
</li><li><p>10&nbsp;&nbsp;Appendix</p>
<ul class="toc-item"><li><p>10.1&nbsp;&nbsp;Further reading</p>
</li><li><p>10.2&nbsp;&nbsp;Internet sources for the definitions used in this notebook:</p>
</li></ul></li></ul></div><div class="section" id="Creating-user-defined-types">
<h1>Creating user-defined types<a class="headerlink" href="#Creating-user-defined-types" title="Permalink to this headline">¶</a></h1>
<p>This notebook shows how to use classes to compartmentalize information. The basic idea is to produce objects that can contain complex data (called <em>state</em>) but present a few simple, easily documented methods to access that data.</p>
<div class="section" id="Learning-objectives">
<h2>Learning objectives<a class="headerlink" href="#Learning-objectives" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Be able to define a simple class that contains class variables, instance variables and instance methods and use it to pass parameters into and out of a function.</li>
</ul>
</div>
<div class="section" id="Types-and-classes">
<h2>Types and classes<a class="headerlink" href="#Types-and-classes" title="Permalink to this headline">¶</a></h2>
<p>In python, a type and a class are essentially synonyms. Consider the following code example:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>


<span></span><span class="k">class</span> <span class="nc">Problem_Def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    this class holds the specifcation for the domain,</span>
<span class="sd">    including the value of the porosity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poro</span> <span class="o">=</span> <span class="n">poro</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">=</span> <span class="n">wx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wy</span> <span class="o">=</span> <span class="n">wy</span>


<span class="n">n_x</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">n_y</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">poro</span> <span class="o">=</span> <span class="mf">0.4</span>
<span class="n">width_x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">width_y</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">the_problem</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">width_x</span><span class="p">,</span> <span class="n">width_y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In words, we say that <code class="docutils literal notranslate"><span class="pre">the_problem</span></code> is an <strong>instance</strong> of type <code class="docutils literal notranslate"><span class="pre">Problem_Def</span></code>. The instance is <strong>constructed</strong> by calling the special <strong>instance method</strong> <code class="docutils literal notranslate"><span class="pre">__init__</span></code> which is referred to as the <strong>class constructor</strong>.</p>
</div>
<div class="section" id="Class-variables">
<h2>Class variables<a class="headerlink" href="#Class-variables" title="Permalink to this headline">¶</a></h2>
<p>Suppose we have some constants that we want to share among every instance of a class. We guarantee that every instance has the same set of constants by making them <strong>class variables</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">Problem_Def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    this class holds the specifcation for the domain,</span>
<span class="sd">    including the value of the porosity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">speed_of_light</span> <span class="o">=</span> <span class="mf">3.0e8</span>  <span class="c1"># m/s</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poro</span> <span class="o">=</span> <span class="n">poro</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">=</span> <span class="n">wx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wy</span> <span class="o">=</span> <span class="n">wy</span>
</pre></div>
</div>
</div>
<p>Note the difference between prob1.wx and prob2.wx:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">width_x</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="n">prob1</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">width_x</span><span class="p">,</span> <span class="n">width_y</span><span class="p">)</span>
<span class="n">width_x</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">prob2</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">width_x</span><span class="p">,</span> <span class="n">width_y</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">prob1</span><span class="o">.</span><span class="n">wx</span><span class="p">,</span> <span class="n">prob1</span><span class="o">.</span><span class="n">speed_of_light</span><span class="p">,</span> <span class="n">prob2</span><span class="o">.</span><span class="n">wx</span><span class="p">,</span> <span class="n">prob2</span><span class="o">.</span><span class="n">speed_of_light</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Instance-variables">
<h2>Instance variables<a class="headerlink" href="#Instance-variables" title="Permalink to this headline">¶</a></h2>
<p>The whole point of constructing instances is to have them carry unique information. Note that <code class="docutils literal notranslate"><span class="pre">__init__</span></code> has no return line. This is because it doesn’t return a value, instead it modifies the memory of the specific instance being constructed (called <code class="docutils literal notranslate"><span class="pre">self</span></code> ) by setting the instance variables to the values specified by the class constructor. The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> constructor is a regular python function, so it can take default values like this:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">Problem_Def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    this class holds the specifcation for the domain,</span>
<span class="sd">    including the value of the porosity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">speed_of_light</span> <span class="o">=</span> <span class="mf">3.0e8</span>  <span class="c1"># m/s</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wy</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poro</span> <span class="o">=</span> <span class="n">poro</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">=</span> <span class="n">wx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wy</span> <span class="o">=</span> <span class="n">wy</span>


<span class="n">prob3</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">prob3</span><span class="o">.</span><span class="n">wx</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Instance-methods">
<h2>Instance methods<a class="headerlink" href="#Instance-methods" title="Permalink to this headline">¶</a></h2>
<p>A class can define functions (called <code class="docutils literal notranslate"><span class="pre">methods</span></code> when used in a class) in addition to its constructor. This essentially solves the problem of passing many arguments to a function. Consider this new method:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">Problem_Def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    this class holds the specifcation for the domain,</span>
<span class="sd">    including the value of the porosity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">speed_of_light</span> <span class="o">=</span> <span class="mf">3.0e8</span>  <span class="c1"># m/s</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wy</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poro</span> <span class="o">=</span> <span class="n">poro</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">=</span> <span class="n">wx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wy</span> <span class="o">=</span> <span class="n">wy</span>

    <span class="k">def</span> <span class="nf">critical_coef</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="s2">&quot;inside critical_coef</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;note that I only need self</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;to use all the information inside</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;the instance</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">crit_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">poro</span>
        <span class="k">return</span> <span class="n">crit_num</span>


<span class="n">prob4</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">)</span>
<span class="n">crit_condition</span> <span class="o">=</span> <span class="n">prob4</span><span class="o">.</span><span class="n">critical_coef</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;crit_condition={crit_condition}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Passing-self-to-instance-methods">
<h3>Passing self to instance methods<a class="headerlink" href="#Passing-self-to-instance-methods" title="Permalink to this headline">¶</a></h3>
<p>Python made the design decision to require that all instance methods take self as their first parameter, even though it isn’t needed when you actually call the method. A language like C++ made a different decision – its version of <code class="docutils literal notranslate"><span class="pre">self</span></code>, called <code class="docutils literal notranslate"><span class="pre">this</span></code>, isn’t needed in c++ method signatures. This rationale for this difference is an example of this line from the <em>Zen of Python</em>:</p>
<p><strong>Explicit is better than implicit</strong></p>
</div>
</div>
<div class="section" id="Your-turn">
<h2>Your turn<a class="headerlink" href="#Your-turn" title="Permalink to this headline">¶</a></h2>
<p>In the cell below add two new instance methods to the <code class="docutils literal notranslate"><span class="pre">Problem_Def</span></code> class:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">to_dict</span></code>: a method that returns a dictionary containing the 5 data members of the instance</li>
<li><code class="docutils literal notranslate"><span class="pre">from_dict</span></code>: a method that takes a dictonary with the five data members and returns an new instance of type <code class="docutils literal notranslate"><span class="pre">Problem_Def</span></code></li>
<li>Test that you can <strong>round trip</strong> an instance of your class by saving it as a dict, then using that dict to construct a new class instance</li>
<li>Note that <code class="docutils literal notranslate"><span class="pre">from_dict</span></code> doesn’t need any information from the instance in order to create a new object. This is outside the scope of this course, but if/when you learn more about object-oriented programming you’ll see that <code class="docutils literal notranslate"><span class="pre">from_dict</span></code> is an example of a function that should be written as a class method, not an instance method.</li>
</ul>
</div>
<div class="section" id="Solution----if-you-don't-know-about-class-methods">
<h2>Solution – if you don’t know about class methods<a class="headerlink" href="#Solution----if-you-don't-know-about-class-methods" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">Problem_Def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    this class holds the specifcation for the domain,</span>
<span class="sd">    including the value of the porosity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">speed_of_light</span> <span class="o">=</span> <span class="mf">3.0e8</span>  <span class="c1"># m/s</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wy</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poro</span> <span class="o">=</span> <span class="n">poro</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">=</span> <span class="n">wx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wy</span> <span class="o">=</span> <span class="n">wy</span>

    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_dict</span><span class="p">):</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;nx&quot;</span><span class="p">]</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;ny&quot;</span><span class="p">]</span>
        <span class="n">poro</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;poro&quot;</span><span class="p">]</span>
        <span class="n">wx</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;wx&quot;</span><span class="p">]</span>
        <span class="n">wy</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;wy&quot;</span><span class="p">]</span>
        <span class="c1">#</span>
        <span class="c1"># works, with code smell -- see note 1 below</span>
        <span class="c1">#</span>
        <span class="k">return</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ny</span><span class="p">,</span>
                        <span class="n">poro</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out_dict</span>


<span class="n">prob5</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">width_x</span><span class="p">,</span> <span class="n">width_y</span><span class="p">)</span>
<span class="n">dict5</span> <span class="o">=</span> <span class="n">prob5</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="c1">#</span>
<span class="c1"># works, with code smell -- seen note 2 below</span>
<span class="c1">#</span>
<span class="n">prob6</span> <span class="o">=</span> <span class="n">prob5</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dict5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="this-works,-but-suffers-from-code-smell">
<h3>this works, but suffers from code smell<a class="headerlink" href="#this-works,-but-suffers-from-code-smell" title="Permalink to this headline">¶</a></h3>
<p>What’s the problem with this?</p>
<ol class="arabic simple">
<li>We had to explicity type <code class="docutils literal notranslate"><span class="pre">Problem_Def</span></code> the return line above, limiting code reuse.</li>
<li>To get object <code class="docutils literal notranslate"><span class="pre">prob6</span></code> using <code class="docutils literal notranslate"><span class="pre">from_dict</span></code>, we need to create an object <code class="docutils literal notranslate"><span class="pre">prob5</span></code> that has that method. We shouldn’t have to create an unnecessary object just to get the <code class="docutils literal notranslate"><span class="pre">from_dict</span></code> method.</li>
</ol>
</div>
</div>
<div class="section" id="Solution----using-class-methods">
<h2>Solution – using class methods<a class="headerlink" href="#Solution----using-class-methods" title="Permalink to this headline">¶</a></h2>
<p>Here is the correct way to write <code class="docutils literal notranslate"><span class="pre">from_dict</span></code> method using a &#64;classmethod decorator. Understanding the details of this aren’t necessary for this course, but it would be good to understand why this is different, and why the resulting usage pattern is better.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">Problem_Def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    this class holds the specifcation for the domain,</span>
<span class="sd">    including the value of the porosity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">speed_of_light</span> <span class="o">=</span> <span class="mf">3.0e8</span>  <span class="c1"># m/s</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wy</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poro</span> <span class="o">=</span> <span class="n">poro</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wx</span> <span class="o">=</span> <span class="n">wx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wy</span> <span class="o">=</span> <span class="n">wy</span>
<span class="c1">#</span>
<span class="c1"># note 1 -- @classmethod is a &quot;decorator&quot; that changes</span>
<span class="c1"># the meaning of the first argument in from_dict from</span>
<span class="c1"># the instance (self) to the class (Problem_Def)</span>
<span class="c1"># so this code will always work, even if we change the</span>
<span class="c1"># name of the class to New_Problem at some point</span>
<span class="c1">#</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">input_dict</span><span class="p">):</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;nx&quot;</span><span class="p">]</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;ny&quot;</span><span class="p">]</span>
        <span class="n">poro</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;poro&quot;</span><span class="p">]</span>
        <span class="n">wx</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;wx&quot;</span><span class="p">]</span>
        <span class="n">wy</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="s2">&quot;wy&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ny</span><span class="p">,</span>
                        <span class="n">poro</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">poro</span><span class="p">,</span> <span class="n">wx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out_dict</span>


<span class="n">prob5</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">poro</span><span class="p">,</span> <span class="n">width_x</span><span class="p">,</span> <span class="n">width_y</span><span class="p">)</span>
<span class="n">dict5</span> <span class="o">=</span> <span class="n">prob5</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="c1">#</span>
<span class="c1"># note 2, below we are getting a new instance straight from</span>
<span class="c1"># the class method, without having to construct prob5 just to call</span>
<span class="c1"># from_dict</span>
<span class="c1">#</span>
<span class="n">prob6</span> <span class="o">=</span> <span class="n">Problem_Def</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dict5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Summary">
<h2>Summary<a class="headerlink" href="#Summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python uses user-defined types, called classes, to solve the problem of <em>information hiding</em>, i.e. organizing information so that it can be compartmentalized, reducing the complexity of code.</li>
<li>We don’t need to use inheritence in this course, but it is a big part of what makes objects useful. It allows us to extend other peoples classes without touching their original source code. This is called the “open/closed principal”, i.e. objects should be open to extension while being closed to modification.</li>
</ul>
</div>
<div class="section" id="Appendix">
<h2>Appendix<a class="headerlink" href="#Appendix" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Further-reading">
<h3>Further reading<a class="headerlink" href="#Further-reading" title="Permalink to this headline">¶</a></h3>
<p>Again, not needed for this course, but useful if you want to understand the main parts of python or other object-oriented languages</p>
<ul class="simple">
<li><a class="reference external" href="http://openbookproject.net/thinkcs/python/english3e/classes_and_objects_I.html">Chapter15 of How to think like a computer scientist</a></li>
<li><a class="reference external" href="https://www.pythonlikeyoumeanit.com/module_4.html">Module 4 of Python like you mean it</a></li>
</ul>
</div>
<div class="section" id="Internet-sources-for-the-definitions-used-in-this-notebook:">
<h3>Internet sources for the definitions used in this notebook:<a class="headerlink" href="#Internet-sources-for-the-definitions-used-in-this-notebook:" title="Permalink to this headline">¶</a></h3>
<p>From <a class="reference external" href="https://docs.python.org/3/tutorial/classes.html">https://docs.python.org/3/tutorial/classes.html</a></p>
<p>Classes provide a means of bundling data and functionality together. Creating a new class creates a new type of object, allowing new instances of that type to be made. Each class instance can have attributes attached to it for maintaining its state. Class instances can also have methods (defined by its class) for modifying its state.</p>
<p>From: <a class="reference external" href="https://www.tutorialspoint.com/python/python_classes_objects.htm">https://www.tutorialspoint.com/python/python_classes_objects.htm</a></p>
<p>Class − A user-defined prototype for an object that defines a set of attributes that characterize any object of the class. The attributes are data members (class variables and instance variables) and methods, accessed via dot notation.</p>
<p>Instance − An individual object of a certain class. An object obj that belongs to a class Circle, for example, is an instance of the class Circle.</p>
<p>Instantiation − The creation of an instance of a class.</p>
<p>Class variable − A variable that is shared by all instances of a class. Class variables are defined within a class but outside any of the class’s methods. Class variables are not used as frequently as instance variables are.</p>
<p>Data member − A class variable or instance variable that holds data associated with a class and its objects.</p>
<p>Function overloading − The assignment of more than one behavior to a particular function. The operation performed varies by the types of objects or arguments involved.</p>
<p>Instance variable − A variable that is defined inside a method and belongs only to the current instance of a class.</p>
<p>Inheritance − The transfer of the characteristics of a class to other classes that are derived from it.</p>
<p>Method − A special kind of function that is defined in a class definition.</p>
<p>Object − A unique instance of a data structure that’s defined by its class. An object comprises both data members (class variables and instance variables) and methods.</p>
<p>Operator overloading − The assignment of more than one function to a particular operator.</p>
<p>Creating Classes The class statement creates a new class definition. The name of the class immediately follows the keyword class followed by a colon as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ClassName</span><span class="p">:</span>
  <span class="s2">&quot;Optional class documentation string&quot;</span>
   <span class="k">class</span> <span class="nc">body</span>
</pre></div>
</div>
<p>The class has a documentation string, which can be accessed via ClassName.<strong>doc</strong>.</p>
<p>The class body consists of all the component statements defining class members, data attributes and functions.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Philip Austin.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>